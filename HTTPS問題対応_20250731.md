# HTTPS/HTTPアクセス問題の分析と対応

## 問題の状況
- ブラウザが`https://akb001yebraxfqsm9y.dyndns-web.com/lacisstack/boards`にアクセス
- 404 Not Foundエラーが返される
- LPGのログに外部からのアクセス記録なし

## 原因分析

### 1. プロトコルの不一致
- **ブラウザ**: HTTPS（ポート443）でアクセス
- **LPG**: HTTP（ポート80）のみ対応
- **結果**: リクエストがLPGに到達していない

### 2. 可能性のある構成

#### パターンA: 別のWebサーバーが443を処理
```
インターネット
    ↓
[HTTPS:443] → ER605 → 別のWebサーバー（404を返している）
[HTTP:80]   → ER605 → （転送設定なし？）
```

#### パターンB: ER605がHTTPSを処理
```
インターネット
    ↓
[HTTPS:443] → ER605（404を返している）
[HTTP:80]   → ER605 → （転送設定なし？）
```

## 確認が必要な項目

### 1. Omadaでの確認事項
- ポート80のフォワーディング設定状況
- ポート443のフォワーディング設定状況
- 現在443を使用しているサービスの確認

### 2. 既存サービスの確認
404エラーが返されているということは、何かがHTTPSリクエストを処理しています：
- ER605自体のWebサービス？
- 別のサーバー？

## 対応方法

### 方法1: HTTPでのアクセスを試す（推奨）
```bash
# HTTPでアクセス
http://akb001yebraxfqsm9y.dyndns-web.com/lacisstack/boards
```

### 方法2: HTTPSリダイレクトの設定
既存のHTTPSサーバーで、`/lacisstack/*`へのリクエストをHTTPにリダイレクト

### 方法3: LPGでHTTPS対応（将来的に）
1. Let's Encrypt証明書の取得
2. LPGでHTTPS対応
3. ポート443の転送設定

## 即座に試せること

1. **HTTPアクセスの確認**
   ```
   http://akb001yebraxfqsm9y.dyndns-web.com/lacisstack/boards
   ```

2. **ポート80が開いているか確認**
   ```bash
   curl -v http://akb001yebraxfqsm9y.dyndns-web.com/
   ```

3. **現在の443の使用状況確認**
   ```bash
   curl -v https://akb001yebraxfqsm9y.dyndns-web.com/
   ```

## 推奨される設定

### Omadaでの設定
```
# 最低限必要
外部ポート80 → 192.168.234.2:80 (LPG)

# 将来的に
外部ポート443 → 192.168.234.2:443 (LPG)
```

### 既存HTTPSサーバーでのプロキシ設定
もし既存のWebサーバーがある場合：
```nginx
location /lacisstack/ {
    proxy_pass http://192.168.234.2/lacisstack/;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
}
```