{% extends "base.html" %}

{% block title %}Logs{% endblock %}

{% block content %}
<div class="Subhead">
    <h2 class="Subhead-heading">ログビューアー</h2>
    <div class="Subhead-actions">
        <button class="btn btn-sm" onclick="refreshLogs()">
            更新
        </button>
    </div>
</div>

<div class="Box mt-3">
    <div class="Box-header">
        <h3 class="Box-title">プロキシログ（最新50行）</h3>
    </div>
    
    <div class="Box-body" style="max-height: 600px; overflow-y: auto;">
        {% if logs %}
        <pre class="log-viewer">{% for line in logs %}{{ line }}{% endfor %}</pre>
        {% else %}
        <p class="color-fg-muted">ログがありません</p>
        {% endif %}
    </div>
</div>

<style>
.log-viewer {
    background-color: #0d1117;
    padding: 16px;
    border-radius: 6px;
    font-family: 'SF Mono', Monaco, 'Cascadia Code', monospace;
    font-size: 12px;
    line-height: 1.5;
    white-space: pre-wrap;
    word-wrap: break-word;
}
</style>

<script>
function refreshLogs() {
    location.reload();
}

// 自動更新（30秒ごと）
setInterval(() => {
    if (document.visibilityState === 'visible') {
        refreshLogs();
    }
}, 30000);
</script>
{% endblock %}