{% extends "base_dark.html" %}

{% block title %}ネットワーク状態 - LacisProxyGateway{% endblock %}

{% block content %}
<div class="container-fluid">
    <h1 class="mb-4"><i class="bi bi-activity"></i> ネットワーク状態</h1>

    <div class="row">
        <div class="col-md-3">
            <div class="card text-center">
                <div class="card-body">
                    <h5 class="card-title">CPU使用率</h5>
                    <div class="display-4">{{ "%.1f"|format(metrics.cpu_usage) }}%</div>
                    <div class="progress mt-2">
                        <div class="progress-bar" style="width: {{ metrics.cpu_usage }}%"></div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card text-center">
                <div class="card-body">
                    <h5 class="card-title">メモリ使用率</h5>
                    <div class="display-4">{{ "%.1f"|format(metrics.memory_usage) }}%</div>
                    <div class="progress mt-2">
                        <div class="progress-bar bg-warning" style="width: {{ metrics.memory_usage }}%"></div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card text-center">
                <div class="card-body">
                    <h5 class="card-title">総リクエスト数</h5>
                    <div class="display-4">{{ metrics.requests_total }}</div>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card text-center">
                <div class="card-body">
                    <h5 class="card-title">リクエスト/分</h5>
                    <div class="display-4">{{ metrics.requests_per_minute|length }}</div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
// 30秒ごとに自動更新
setTimeout(function(){
    location.reload();
}, 30000);
</script>
{% endblock %}